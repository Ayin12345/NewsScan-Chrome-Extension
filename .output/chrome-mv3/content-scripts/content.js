var content=function(){"use strict";var q=Object.defineProperty;var $=(y,u,w)=>u in y?q(y,u,{enumerable:!0,configurable:!0,writable:!0,value:w}):y[u]=w;var f=(y,u,w)=>$(y,typeof u!="symbol"?u+"":u,w);var P,R;function y(o){return o}const u={matches:["<all_urls>"],exclude_matches:["chrome://*","chrome-extension://*","moz-extension://*","edge://*","about:*","chrome-devtools://*","devtools://*","*://console.cloud.google.com/*","*://developers.google.com/*","*://apis.google.com/*","*://www.googleapis.com/*"],main(){let n=440;chrome.runtime.onMessage.addListener((i,a,r)=>{if((i==null?void 0:i.type)==="FNR_PING")return r({ok:!0}),!0}),chrome.runtime.onMessage.addListener(i=>{if((i==null?void 0:i.type)==="TOGGLE_INJECTED_SIDEBAR"){const a=!!document.getElementById("fake-news-reader-injected-sidebar");if(document.hidden&&!a)return;if(a)i.keepOpen?(b(),(i.preloadedAnalysis||i.hasPreloadedAnalysis)&&setTimeout(()=>{const r=document.querySelector("#fake-news-reader-injected-sidebar iframe");r!=null&&r.contentWindow&&r.contentWindow.postMessage({type:"PRELOADED_ANALYSIS",data:i.preloadedAnalysis},"*")},50)):D();else if(b(),i.preloadedAnalysis||i.hasPreloadedAnalysis)setTimeout(()=>{const r=document.querySelector("#fake-news-reader-injected-sidebar iframe");r!=null&&r.contentWindow&&r.contentWindow.postMessage({type:"PRELOADED_ANALYSIS",data:i.preloadedAnalysis},"*")},100);else{const r=(l=1)=>{const d=document.querySelector("#fake-news-reader-injected-sidebar iframe");d!=null&&d.contentWindow?d.contentWindow.postMessage({type:"TRIGGER_NEW_ANALYSIS"},"*"):l<3&&setTimeout(()=>r(l+1),100)};setTimeout(()=>r(1),150)}}if((i==null?void 0:i.type)==="EXPAND_FOR_ANALYSIS"){if(document.hidden)return;const a=i.expanded;n=a?720:440,a&&!document.getElementById("fake-news-reader-injected-sidebar")?b():document.getElementById("fake-news-reader-injected-sidebar")&&A()}}),chrome.runtime.onMessage.addListener((i,a,r)=>{if(i.type==="GET_PAGE_CONTENT"){const l=()=>setTimeout(()=>s(r),300);return document.readyState!=="complete"?window.addEventListener("load",l,{once:!0}):l(),!0}});function s(i){try{let a=null;a=document.querySelector("article"),a||(a=document.querySelector('main, [role="main" ]')),a||(a=document.querySelector(".article, .story, .post, .entry, .content-body")),a||(a=document.body);const r=a.cloneNode(!0);r.querySelectorAll('script, style, noscript, iframe, nav, header, footer, aside, .ads, [role="complementary"]').forEach(m=>m.remove());let d=Array.from(r.querySelectorAll("p")).map(m=>{var p;return((p=m.textContent)==null?void 0:p.trim())||""}).filter(Boolean).join(" ");d.length<200&&(d=(r.innerText||"").trim()),d=d.replace(/\s+/g," ").trim();const S=d.split(/\s+/).filter(Boolean).length;i({success:!0,data:{title:document.title,content:d,url:location.href,wordCount:S}})}catch{try{i({error:"Failed to extract page content."})}catch{}}}let t=null;const c=window.matchMedia("(prefers-reduced-motion: reduce)"),g=c.matches?0:160;function b(i){document.hidden&&!t||(t||W(),t.style.opacity="1",A())}function W(){if(t||document.getElementById("fake-news-reader-injected-sidebar"))return;t=document.createElement("div"),t.id="fake-news-reader-injected-sidebar",t.setAttribute("aria-label","Fake News Reader Sidebar"),t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.height="100vh",t.style.zIndex="2147483647",t.style.background="#fff",t.style.borderLeft="1px solid rgba(0,0,0,0.12)",t.style.boxShadow="0 0 0 1px rgba(0,0,0,0.06), -2px 0 8px rgba(0,0,0,0.06)",t.style.overflow="hidden",t.style.transition=`width ${g}ms ease, opacity ${g}ms ease`,t.style.display="block";const i=document.createElement("div");i.style.height="100%",i.style.display="flex",i.style.flexDirection="column";const a=document.createElement("div");a.style.cssText=["all: initial","display: flex","align-items: center","justify-content: space-between","padding: 12px 16px","border-bottom: 1px solid rgba(0,0,0,0.12)","box-sizing: border-box","width: 100%","background: #ffffff","box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08)"].join(";");const r=document.createElement("div");r.style.cssText=["all: initial","display: flex","align-items: center","gap: 8px"].join(";");const l=document.createElement("img"),d=chrome.runtime.getURL("logo.png");l.src=d,l.alt="NewsScan Logo",l.style.cssText=["all: initial","width: 35px","height: 35px","object-fit: contain"].join(";"),l.onerror=L=>{l.style.display="none"};const S=document.createElement("span");S.textContent="NewsScan",S.style.cssText=["all: initial","font: 600 15px system-ui, -apple-system, Segoe UI, Roboto","color: #202124","letter-spacing: -0.01em"].join(";"),r.appendChild(l),r.appendChild(S);const m=document.createElement("button");m.setAttribute("aria-label","Close"),m.textContent="Ã—",m.style.cssText=["all: initial","display:inline-flex","align-items:center","justify-content:center","width:28px","height:28px","cursor:pointer","font: 600 16px/1 system-ui, -apple-system, Segoe UI, Roboto","color:#6b7280","background:transparent","border-radius: 4px"].join(";"),a.appendChild(r),a.appendChild(m);const p=document.createElement("div");p.style.flex="1",p.style.overflow="hidden";const h=document.createElement("iframe");h.title="NewsScan",h.style.border="0",h.style.width="100%",h.style.height="100%",h.src=chrome.runtime.getURL("sidebar.html"),p.appendChild(h),m.onclick=()=>{var L;try{(L=h.contentWindow)==null||L.postMessage({type:"TRIGGER_RESET"},"*")}catch{}setTimeout(()=>{D()},50)},i.appendChild(a),i.appendChild(p),t.appendChild(i),document.documentElement.appendChild(t),A()}function D(){t&&(t.remove(),t=null,j())}function U(){document.documentElement.style.scrollBehavior="auto",document.body.style.transition=c.matches?"":`margin-right ${g}ms ease`,document.body.style.marginRight=`${n}px`}function j(){document.body.style.marginRight="",document.body.style.transition=""}function A(){t&&(t.style.width=`${n}px`,t.style.opacity="1",U())}document.addEventListener("visibilitychange",()=>{document.hidden&&t?(t.style.opacity="0",j()):!document.hidden&&t&&(t.style.opacity="1",A())})}},v=(R=(P=globalThis.browser)==null?void 0:P.runtime)!=null&&R.id?globalThis.browser:globalThis.chrome;function x(o,...e){}const k={debug:(...o)=>x(console.debug,...o),log:(...o)=>x(console.log,...o),warn:(...o)=>x(console.warn,...o),error:(...o)=>x(console.error,...o)},I=class I extends Event{constructor(e,n){super(I.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};f(I,"EVENT_NAME",_("wxt:locationchange"));let N=I;function _(o){var e;return`${(e=v==null?void 0:v.runtime)==null?void 0:e.id}:content:${o}`}function F(o){let e,n;return{run(){e==null&&(n=new URL(location.href),e=o.setInterval(()=>{let s=new URL(location.href);s.href!==n.href&&(window.dispatchEvent(new N(s,n)),n=s)},1e3))}}}const E=class E{constructor(e,n){f(this,"isTopFrame",window.self===window.top);f(this,"abortController");f(this,"locationWatcher",F(this));f(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return v.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const s=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,n){const s=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const n=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const s=requestIdleCallback((...t)=>{this.signal.aborted||e(...t)},n);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,n,s,t){var c;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,n.startsWith("wxt:")?_(n):n,s,{...t,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),k.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:E.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var c,g,b;const n=((c=e.data)==null?void 0:c.type)===E.SCRIPT_STARTED_MESSAGE_TYPE,s=((g=e.data)==null?void 0:g.contentScriptName)===this.contentScriptName,t=!this.receivedMessageIds.has((b=e.data)==null?void 0:b.messageId);return n&&s&&t}listenForNewerScripts(e){let n=!0;const s=t=>{if(this.verifyScriptStartedEvent(t)){this.receivedMessageIds.add(t.data.messageId);const c=n;if(n=!1,c&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}};f(E,"SCRIPT_STARTED_MESSAGE_TYPE",_("wxt:content-script-started"));let C=E;function G(){}function T(o,...e){}const M={debug:(...o)=>T(console.debug,...o),log:(...o)=>T(console.log,...o),warn:(...o)=>T(console.warn,...o),error:(...o)=>T(console.error,...o)};return(async()=>{try{const{main:o,...e}=u,n=new C("content",e);return await o(n)}catch(o){throw M.error('The content script "content" crashed on startup!',o),o}})()}();
content;
